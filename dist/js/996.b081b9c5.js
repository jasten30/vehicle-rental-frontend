"use strict";(self["webpackChunkvehicle_rental_frontend"]=self["webpackChunkvehicle_rental_frontend"]||[]).push([[996],{7996:function(e,a,i){i.r(a),i.d(a,{default:function(){return S}});var t=i(6768),l=i(4232);const n={class:"admin-page-container"},s={key:0,class:"info-state"},o={key:1,class:"info-state error-state"},c={key:2,class:"info-state"},p={key:3,class:"table-wrapper"},r={class:"applications-table"},d={class:"table-body"},u={class:"action-cell"},v=["onClick"];function h(e,a,i,h,k,L){const m=(0,t.g2)("AdminDriveApplicationModal");return(0,t.uX)(),(0,t.CE)("div",n,[a[4]||(a[4]=(0,t.Lk)("div",{class:"header-section"},[(0,t.Lk)("h1",{class:"page-title"},"Driver Applications"),(0,t.Lk)("p",{class:"page-subtitle"},"Review and approve users who have submitted their documents to drive.")],-1)),k.loading?((0,t.uX)(),(0,t.CE)("div",s,[...a[1]||(a[1]=[(0,t.Lk)("p",null,"Loading applications...",-1)])])):k.error?((0,t.uX)(),(0,t.CE)("div",o,[(0,t.Lk)("p",null,(0,l.v_)(k.error),1),(0,t.Lk)("button",{onClick:a[0]||(a[0]=(...e)=>L.fetchApplications&&L.fetchApplications(...e)),class:"button primary"},"Retry")])):k.applications&&0!==k.applications.length?((0,t.uX)(),(0,t.CE)("div",p,[(0,t.Lk)("table",r,[a[3]||(a[3]=(0,t.Lk)("thead",{class:"table-header"},[(0,t.Lk)("tr",null,[(0,t.Lk)("th",null,"Submitted On"),(0,t.Lk)("th",null,"Applicant Name"),(0,t.Lk)("th",null,"Email"),(0,t.Lk)("th",null,"Status"),(0,t.Lk)("th",null,"Actions")])],-1)),(0,t.Lk)("tbody",d,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(k.applications,e=>((0,t.uX)(),(0,t.CE)("tr",{key:e.id,class:"table-row"},[(0,t.Lk)("td",null,(0,l.v_)(L.formatDate(e.submittedAt)),1),(0,t.Lk)("td",null,(0,l.v_)(e.userName),1),(0,t.Lk)("td",null,(0,l.v_)(e.userEmail),1),(0,t.Lk)("td",null,[(0,t.Lk)("span",{class:(0,l.C4)(["status-badge",`status-${e.status}`])},(0,l.v_)(e.status),3)]),(0,t.Lk)("td",u,[(0,t.Lk)("button",{onClick:a=>L.reviewApplication(e),class:"button review"},"Review",8,v)])]))),128))])])])):((0,t.uX)(),(0,t.CE)("div",c,[...a[2]||(a[2]=[(0,t.Lk)("p",null,"There are no pending driver applications.",-1)])])),(0,t.bF)(m,{"is-open":k.isModalOpen,application:k.selectedApplication,onClose:L.closeModal,onApprove:L.handleApproval,onDecline:L.handleDecline},null,8,["is-open","application","onClose","onApprove","onDecline"])])}var k=i(8340),L=i(782),m=i(5130);const A={class:"modal-card"},f={key:0,class:"modal-content"},y={class:"user-info"},D={class:"documents-grid"},b={class:"document-viewer"},w=["src"],g={class:"document-viewer"},C=["src","alt"],_={class:"modal-actions"};function E(e,a,i,n,s,o){return i.isOpen?((0,t.uX)(),(0,t.CE)("div",{key:0,class:"modal-overlay",onClick:a[2]||(a[2]=(0,m.D$)(a=>e.$emit("close"),["self"]))},[(0,t.Lk)("div",A,[a[7]||(a[7]=(0,t.Lk)("h3",{class:"modal-title"},"Review Driver Application",-1)),i.application?((0,t.uX)(),(0,t.CE)("div",f,[(0,t.Lk)("div",y,[(0,t.Lk)("p",null,[a[3]||(a[3]=(0,t.Lk)("strong",null,"Applicant:",-1)),(0,t.eW)(" "+(0,l.v_)(i.application.userName)+" ("+(0,l.v_)(i.application.userEmail)+")",1)]),(0,t.Lk)("p",null,[a[4]||(a[4]=(0,t.Lk)("strong",null,"Submitted:",-1)),(0,t.eW)(" "+(0,l.v_)(o.formatDate(i.application.submittedAt)),1)])]),a[6]||(a[6]=(0,t.Lk)("hr",{class:"divider"},null,-1)),(0,t.Lk)("div",D,[(0,t.Lk)("div",b,[a[5]||(a[5]=(0,t.Lk)("label",null,"Driver's License",-1)),(0,t.Lk)("img",{src:i.application.licenseUrl,alt:"Driver's License",class:"document-image"},null,8,w)]),(0,t.Lk)("div",g,[(0,t.Lk)("label",null,(0,l.v_)(i.application.otherIdType),1),(0,t.Lk)("img",{src:i.application.otherIdUrl,alt:i.application.otherIdType,class:"document-image"},null,8,C)])])])):(0,t.Q3)("",!0),(0,t.Lk)("div",_,[(0,t.Lk)("button",{onClick:a[0]||(a[0]=a=>e.$emit("decline",{applicationId:i.application.id,userId:i.application.userId})),class:"button decline"},"Decline"),(0,t.Lk)("button",{onClick:a[1]||(a[1]=a=>e.$emit("approve",{applicationId:i.application.id,userId:i.application.userId})),class:"button approve"},"Approve")])])])):(0,t.Q3)("",!0)}var I={name:"AdminDriveApplicationModal",props:{isOpen:Boolean,application:Object},emits:["close","approve","decline"],methods:{formatDate(e){if(!e)return"N/A";const a=e.seconds?new Date(1e3*e.seconds):new Date(e);return k.c9.fromJSDate(a).toFormat("LLL dd, yyyy")}}},M=i(1241);const X=(0,M.A)(I,[["render",E],["__scopeId","data-v-929ced74"]]);var O=X,F={name:"AdminDriveApplicationsView",components:{AdminDriveApplicationModal:O},data(){return{loading:!0,applications:[],selectedApplication:null,isModalOpen:!1,error:null}},methods:{...(0,L.i0)(["fetchDriveApplications","approveDriveApplication","declineDriveApplication"]),async fetchApplications(){this.loading=!0,this.error=null;try{this.applications=await this.fetchDriveApplications()}catch(e){console.error("Failed to fetch driver applications:",e),this.error="Could not load applications. Please try again."}finally{this.loading=!1}},formatDate(e){if(!e)return"N/A";const a=e.seconds?new Date(1e3*e.seconds):new Date(e);return k.c9.fromJSDate(a).toFormat("LLL dd, yyyy")},reviewApplication(e){this.selectedApplication=e,this.isModalOpen=!0},closeModal(){this.isModalOpen=!1,this.selectedApplication=null},async handleApproval(e){try{await this.approveDriveApplication(e),await this.fetchApplications()}catch(a){alert("Approval failed. Please try again.")}finally{this.closeModal()}},async handleDecline(e){try{await this.declineDriveApplication(e),await this.fetchApplications()}catch(a){alert("Decline failed. Please try again.")}finally{this.closeModal()}}},created(){this.fetchApplications()}};const N=(0,M.A)(F,[["render",h],["__scopeId","data-v-4f195198"]]);var S=N}}]);
//# sourceMappingURL=996.b081b9c5.js.map